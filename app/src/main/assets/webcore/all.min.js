/* =============================================================
 * Copyright (c) 2014 TP-LINK Technologies Co., Ltd.
 *
 * @version: 0.0.1
 * @author: TP Mobile
 * =============================================================*/

function tables(a,b,c){a=new RegExp("^"+a+"_?\\d*$");var d={};for(var e in b)a.test(e)&&(c(e,b[e]),d[e]=b[e]);return d}function render(a,b,c){var d=$(Mustache.render($("#"+a).html(),b));c&&c(replace(d)),$(document).trigger("drawarrow")}function is_ip(a){var b=/^(([1-9]?\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}([1-9]?\d|1\d{2}|2[0-4]\d|25[0-5])$/;return b.test(a)}function is_valid_ip(a){if(!is_ip(a))return-40303;/^(\d*)/.test(a);var b=Number(RegExp.$1);return 127===b?-40304:b>=224&&239>=b?-40302:0===b?-40309:!0}function is_mac(a){return a=a.toLowerCase(),"00-00-00-00-00-00"===a?-40312:"ff-ff-ff-ff-ff-ff"===a?-40313:/[13579bdf]/.test(a.charAt(1))?-40311:/^([\da-f]{2}-){5}[\da-f]{2}$/.test(a)?!0:-40310}function is_int(a){var b=/^[-|+]?(0|[1-9]\d*)$/;return b.test(a)}function is_float(a){if(is_int(a))return!0;var b=/^[-|+]?(0|[1-9]\d*|)\.\d*$/;return b.test(a)}function is_between(a,b,c){return is_int(a)?(a=parseFloat(a),c>=a&&a>=b):!1}function is_ports(a){if(/-/.test(a)){if(/(\d*)-(\d*)/.test(a)){var b=RegExp.$1,c=RegExp.$2;return is_between(b,1,65535)&&is_between(c,1,65535)}return!1}return is_between(a,1,65535)}!function(a){"use strict";window.callAjax=function(b,c,d){return a.ajax({type:"POST",url:"/stok=xxx/ds",data:JSON.stringify(b),dataType:"JSON",contentType:"application/json; charset=UTF-8",timeout:2e4}).done(function(a){"function"==typeof c&&c(a)}).fail(function(){d&&d.error&&d.error()})},window.ready=function(){var b=arguments;1===b.length?a(document).bind("i18n",b[0]):a.when(b[0],a.Deferred(function(){var b=this;a(document).bind("i18n",function(){b.resolve()})})).done(function(a){b[1](a[0])})}}(jQuery),function(a){"use strict";var b='<div id="dialog" role="dialog"><div role="container">{{#close}}<img role="close" src="../webcore/images/close.png"/>{{/close}}{{^bluesign}}<img role="icon" src="../webcore/images/big-blue-sign.png"/>{{/bluesign}}<p role="content">{{content}}</p>{{{extrainput}}}{{#buttongroup}}<div role="button-group">{{#left}}<button role="left">{{left}}</button>{{/left}}{{#right}}<button role="right">{{right}}</button>{{/right}}</div>{{/buttongroup}}</div><div role="cover"></div></div>';window.dialog=function(c,d){var e=a("#dialog"),f=a("body");e.length&&e.remove(),e=a(Mustache.render(b,c)),setTimeout(function(){f.append(e)},200),f.bind("touchmove",function(a){a.preventDefault()}),e.find('[role="close"]').on("click",function(a){a.stopPropagation(),a.preventDefault(),e.remove(),f.unbind("touchmove")}),e.find('[role="left"]').on("click",function(a){a.stopPropagation(),a.preventDefault(),e.remove(),f.unbind("touchmove"),d&&d(!1)}),e.find('[role="right"]').on("click",function(a){a.stopPropagation(),a.preventDefault(),d?d(!0)!==!1&&(e.remove(),f.unbind("touchmove")):(e.remove(),f.unbind("touchmove"))})};var c=!0,d=window.onpopstate;window.onpopstate=function(){if(c)return c=!1,void 0;var b=a("#dialog"),e=a("body");b.length&&b.remove()&&e.unbind("touchmove"),d&&d()}}(jQuery);var ERROR_MESSAGE={zh:{"error-10000":"未知的错误","error-10100":"JSON消息体格式错误","error-10101":"JSON消息体为空","error-20000":"服务器内部错误","error-20001":"权限不够，需要登录才能访问","error-20002":"请求超时","error-20100":"JSON ID解析错误","error-20103":"请求指令未带方法或者方法未定义","error-20104":"该方法内参数名不存在","error-20105":"该方法内参数类型与值不符","error-20106":"该方法内参数值超出范围","error-20107":"非法参数","error-20200":"邮箱地址格式错误","error-20201":"电话号码格式错误","error-20500":"Device ID格式错误","error-20501":"Device ID不存在，无该设备","error-20502":"绑定设备出错，发生未知错误","error-20503":"解除绑定设备出错，发生未知错误","error-20504":"硬件ID不存在","error-20505":"固件ID不存在","error-20506":"该设备已经被绑定到其他TP-LINK ID","error-20507":"该设备已经被APP端或者服务器后台解除绑定","error-20571":"设备离线","error-20572":"设备别名格式错误，包括长度不符合要求","error-20600":"账户不存在","error-20601":"账户名与密码不匹配","error-20602":"账户未激活","error-20603":"账户已存在","error-20604":"账户名错误，既不是邮箱也不是手机号码","error-20606":"发送激活邮件失败","error-20607":"验证码错误","error-20608":"帐号长度不符合要求","error-20609":"发送重设账户信息邮件失败","error-20610":"账户类型错误","error-20615":"密码格式错误，包括长度不符合要求","error-20616":"新密码格式错误，包括长度不符合要求","error-20651":"Token过期","error-20652":"Token错误","error-20661":"密码输入错误次数过多，账号被锁定2小时","error-20662":"设备被锁定24小时，在此时间内不响应获取验证码的请求","error-20671":"验证账户失败，发生未知错误","error-20672":"验证账户失败，验证链接失效","error-20673":"重设密码链接失效","error-20674":"重设密码失败，发生未知错误","error-20675":"该账号在其他地方有登录","error-20676":"验证码失效，需要重新获取","error-20701":"推送的下载状态错误","error-20702":"推送的下载进度错误","error-20703":"Device ID与固件ID不匹配","error-20801":"APP从来没有登录过云，云端不保存此推送消息","error-20802":"APP不在线，云端会保存此消息，等app上线后再推送，路由器不用重试","error-20811":"不支持的手机系统类型","error-20812":"deviceToken参数格式错误","error-20813":"Badge角标数值不在取值区间","error-20901":"参数逻辑错误","error-20902":"插件ID不存在","error-20903":"插件版本不存在","error-20904":"Preinstalled list长度与PreInstalled不匹配","error-20905":"ManualInstalled list长度与ManualInstalled list不匹配","error-20906":"ManualInstalled list及Preinstalled list之间或者内部有重复","error-20907":"上报的插件与当前设备FW及HW不匹配","error-21001":"IP单小时验证码请求次数超限","error-23001":"无此APP","error-24000":"P2P会话ID不正确","error-24001":"设备端未准备好P2P连接","error-24002":"设备端未准备好Relay连接","error-40101":"路由器系统错误","error-40102":"路由器系统异常","error-40103":"路由器内存不足","error-40104":"路由器不支持的事件","error-40105":"路由器不支持的操作类型","error-40106":"路由器不支持的指令","error-40107":"路由器禁止的操作","error-40108":"路由器无响应，请稍后重试","error-40109":"路由器系统繁忙，请稍后重试","error-40110":"找不到设备","error-40201":"数据溢出","error-40202":"数据长度超出允许范围","error-40203":"条目已存在","error-40204":"条目已被关联","error-40205":"条目不存在","error-40206":"条目存在冲突","error-40207":"列表已满","error-40208":"列表为空","error-40209":"参数错误","error-40210":"参数格式错误","error-40211":"缺少必要参数","error-40212":"参数错误","error-40213":"字符串长度不在允许范围之内","error-40301":"IP地址不正确，请输入正确的IP地址","error-40302":"IP地址不能为组播地址，请输入正确的IP地址","error-40303":"IP地址格式错误，请输入正确的IP地址（格式为：X.X.X.X）","error-40304":"IP地址不能为回环地址，请输入正确的IP地址","error-40305":"子网掩码不正确，请输入正确的子网掩码","error-40306":"网关地址不正确，请输入正确的网关地址","error-40307":"网关地址无法连通","error-40308":"网关地址不能与LAN口IP地址在同一网段","error-40309":"IP地址的网段非法，请重新输入","error-40310":"MAC地址格式不正确，请输入正确的MAC地址（格式为：XX-XX-XX-XX-XX-XX）","error-40311":"MAC地址不能为组播地址，请输入正确的MAC地址","error-40312":"MAC地址不能为全零，请输入正确的MAC地址","error-40313":"MAC地址不能为广播地址，请输入正确的MAC地址","error-40314":"IP地址不正确，请输入正确的IP地址","error-40315":"IP地址不正确，请输入正确的IP地址","error-40316":"域名错误，请输入正确的域名","error-40317":"IP地址和子网掩码不匹配","error-40401":"登录失败，请重新登录","error-40402":"验证码错误，请重新输入","error-40403":"登录超时，请重新登录","error-40404":"路由器已被锁定，请重启路由器后再重新登录","error-40405":"路由器为出厂状态","error-40406":"当前登录的用户数过多，请稍后重试","error-40407":"首次登录错误","error-40408":"系统被锁定","error-50101":"MTU错误，请重新输入","error-50102":"首选DNS地址错误","error-50103":"备用DNS地址错误","error-50104":"DNS模式错误，请重新设置","error-50105":"WAN口未连接","error-50106":"目的网络地址与子网掩码不匹配，请重新输入","error-50107":"目的网络地址不能与LAN口IP地址在同一网段，请重新输入","error-50108":"目的网络地址不能与WAN口IP地址在同一网段，请重新输入","error-50109":"WAN口速率设置错误","error-50110":"ISP模式设置错误","error-50111":"拨号模式设置错误","error-50112":"连接模式设置错误","error-50113":"LAN口类型设置错误","error-50114":"主机名设置错误，请重新输入","error-50115":"宽带帐号长度超出允许范围，请重新输入","error-50116":"宽带密码长度超出允许范围，请重新输入","error-50117":"自动断线等待时间设置错误，请重新输入","error-50118":"宽带拨号服务器名设置错误，请重新输入","error-50119":"宽带拨号服务名设置错误，请重新输入","error-50120":"不支持该协议类型，请重新设置","error-50121":"不支持该上网方式，请重新设置","error-50122":"MAC地址克隆冲突，请重新设置","error-50201":"无线密码为空","error-50202":"无线SSID长度超出允许范围，请重新输入","error-50203":"无线安全认证类型设置错误，请重新设置","error-50204":"WEP认证类型错误，请重新设置","error-50205":"RADIUS认证类型错误，请重新设置","error-50206":"PSK认证类型错误，请重新设置","error-50207":"加密算法错误，请重新设置","error-50208":"无线密码长度错误，请重新输入","error-50209":"无线密码错误，请重新输入","error-50210":"组密钥更新周期错误，请重新输入","error-50211":"WEP密钥类型错误，请重新设置","error-50212":"默认WEP密钥索引错误，请重新设置","error-50213":"无线密码长度错误，请重新输入","error-50214":"MAC地址过滤条目描述信息长度错误，请重新输入","error-50215":"WPS PIN码长度错误，请重新设置","error-50216":"无线设备工作模式错误，请重新设置","error-50217":"无线速率模式错误，请重新设置","error-50218":"无线国家码错误，请重新设置","error-50219":"频段带宽错误，请重新设置","error-50220":"无线RTS阈值错误，请重新设置","error-50221":"无线分片阈值错误，请重新设置","error-50222":"无线beacon间隔错误，请重新设置","error-50223":"无线Tx功率错误，请重新设置","error-50224":"无线DTIM周期错误，请重新设置","error-50225":"无线密码错误，请重新设置","error-50226":"广播配置错误，请重新设置","error-50227":"AP隔离配置错误，请重新设置","error-50228":"无线状态配置错误，请重新设置","error-50229":"无线模式与带宽不匹配，请重新设置","error-50230":"2.4G无线信道错误，请重新设置","error-50231":"5G无线信道错误，请重新设置","error-50232":"664位加密包含非十六进制字符，请重新输入","error-50233":"无线WDS认证类型错误，请重新设置","error-50234":"3/4地址格式配置错误，请重新设置","error-50235":"Turbo状态配置错误，请重新设置","error-50236":"防蹭网状态配置错误，请重新设置","error-50237":"无线SSID为空，请重新设置","error-50238":"WDS开启时，信道、模式和带宽均不可配，请重新设置","error-50239":"无线SSID全为空格，请重新设置","error-50301":"地址租期错误，请重新输入","error-50302":"地址池开始地址错误，请重新输入","error-50303":"地址池结束地址错误，请重新输入","error-50304":"网关地址错误，请重新输入","error-50305":"网关地址不在LAN口IP地址同一网段，请重新设置","error-50306":"首选DNS服务器地址错误，请重新输入","error-50307":"备用DNS服务器地址错误，请重新输入","error-50308":"自动格式错误，请重新输入","error-50401":"受控主机名不能为空，请重新输入","error-50402":"访问目标名不能为空，请重新输入","error-50403":"日程计划名不能为空，请重新输入","error-50404":"规则描述名不能为空，请重新输入","error-50405":"访问目标域名不能全为空，请重新输入","error-50406":"受控主机IP不能全为空，请重新输入","error-50407":"访问目标IP和端口不能全为空，请重新输入","error-50408":"IP地址必须与LAN口IP地址在同一网段，请重新输入","error-50409":"IP地址不能与LAN口IP地址在同一网段，请重新设置","error-50410":"IP地址不能与LAN口IP地址相同，请重新输入","error-50411":"端口值错误，请重新输入","error-50412":"端口冲突，请重新输入","error-50413":"端口超出允许范围，请重新输入","error-50414":"端口格式错误，请重新输入","error-50415":"控制端口不能为空，请重新输入","error-50416":"数据端口不能为空，请重新输入","error-50417":"域名重复，请重新输入","error-50501":"用户名错误，请重新输入","error-50502":"用户名长度超出允许范围，请重新输入","error-50503":"密码错误，请重新输入","error-50504":"密码长度超出允许范围，请重新输入","error-50505":"admin账户不能删除","error-50506":"admin帐户名不能修改","error-50507":"文件夹路径不能为空，请重新设置","error-50508":"文件夹路径格式错误，请重新设置","error-50509":"文件夹路径长度错误，请重新设置","error-50510":"该文件夹已被共享，请重新设置","error-50701":"自动扫描时间错误，请重新输入","error-50702":"媒体服务器共享名称不能为空，请重新输入","error-50703":"媒体服务器共享名称错误，请重新输入","error-50704":"媒体服务器共享名称长度超出允许范围，请重新输入","error-50705":"媒体服务器共享名称与现有条目重复，请重新输入","error-50801":"用户名不能为空，请重新输入","error-50802":"用户名错误，请重新输入","error-50803":"用户名长度超出允许范围，请重新输入","error-50804":"密码长度超出允许范围，请重新输入","error-50805":"非法的花生壳密码，密码由0-63位数字、英文字母、英文符号组成","error-50806":"密码不能为空，请重新输入","error-50901":"日期输入错误，请重新输入","error-50902":"时区输入错误，请重新输入","error-50903":"系统异常，升级失败，请稍后重试","error-50904":"升级软件格式错误","error-50905":"升级软件格式错误","error-50906":"当前设备不支持该升级软件","error-50907":"升级软件格式错误","error-50908":"升级软件格式错误","error-50909":"当前设备不支持该升级软件","error-50910":"当前设备不支持该升级软件","error-50911":"升级软件格式错误","error-50914":"升级软件格式错误","error-50915":"升级软件格式错误","error-50916":"升级软件格式错误","error-50917":"升级软件格式错误","error-50918":"升级软件格式错误","error-50919":"升级软件格式错误","error-50920":"升级软件格式错误","error-50921":"升级软件格式错误","error-50922":"升级软件格式错误","error-50923":"升级软件格式错误","error-50924":"升级软件格式错误","error-50925":"管理员密码错误，请重新输入","error-50926":"管理员密码不能为空，请重新输入","error-50927":"密码长度超出允许范围，请重新输入","error-50928":"原密码错误，请重新输入","error-50929":"管理员密码长度超出允许范围，请重新输入","error-50930":"管理员密码含有非法字符，请重新输入","error-50931":"新密码和原密码不能相同，请重新输入","error-50932":"已创建管理员密码，不能重复设置","error-50933":"新密码和确认密码不一致，请重新输入","error-51001":"FTP文件夹名称不能为空，请重新输入","error-51002":"FTP文件夹名称错误，请重新输入","error-51003":"FTP文件夹名称长度超出允许范围，请重新输入","error-51004":"FTP共享名称与现有条目重复，请重新输入","error-51005":"文件夹名称中含有非法字符，请重新输入","error-51006":"文件夹名称不能以空格或点开头，请重新输入","error-51101":"应用插件安装文件不存在","error-51102":"应用程序已安装","error-51103":"应用程序未安装","error-51104":"应用程序安装失败，请稍后重试","error-51105":"应用程序卸载失败，请稍后重试","error-51201":"邮箱地址错误，请重新输入","error-51202":"邮箱地址错误，请重新输入","error-51203":"邮箱密码错误，请重新输入","error-51204":"云客户端内部错误","error-51205":"请求字段中无ID","error-51206":"请求方法不存在","error-51207":"请求参数非法","error-51208":"获取数据失败，请稍后重试","error-51209":"URL无效","error-51210":"密码错误，请重新输入","error-51211":"升级软件下载失败，请稍后重试","error-51212":"软件升级失败，请稍后重试","error-51213":"配置失败，请稍后重试","error-51214":"权限不足","error-51215":"请求超时，请稍后重试","error-51216":"路由器可用空间不足，请卸载部分插件后重试","error-51217":"发送请求失败，请稍后重试","error-51218":"正在连接云服务器…","error-51219":"系统繁忙，请稍后重试","error-51220":"帐号格式错误，请重新输入","error-51221":"验证码格式错误，请重新输入","error-51222":"新密码设置错误，请重新输入","error-51223":"TP-LINK ID错误，请重新输入","error-51224":"设备ID错误","error-51225":"未绑定TP-LINK ID，无法安装应用","error-51226":"帐号为空，请重新输入","error-51227":"密码为空，请重新输入","error-51228":"验证码为空，请重新输入","error-51229":"非法设备","error-51301":"访客网络最大上传速度或最大下载速度配置错误，请重新输入","error-51302":"超时配置错误，请重新设置","error-51303":"开放时间类型错误，请重新设置","error-51304":"周期时间格式错误，请重新设置","error-51305":"周期时间格式错误，请重新设置","error-51306":"周期时间格式错误，请重新设置","error-51307":"周期时间格式错误，请重新设置","error-51308":"周期时间格式错误，请重新设置","error-51309":"周期时间格式错误，请重新设置","error-51310":"周期时间格式错误，请重新设置","error-51311":"定时时间限制时间段描述为空，请重新设置","error-51312":"定时时间限制时间段描述太长，请重新设置","error-51313":"定时时间限制开始时间非法，请重新设置","error-51314":"定时时间限制结束时间非法，请重新设置","error-51315":"定时时间限制开始时间不早于结束时间，请重新设置","error-51136":"定时时间限制重复周期为空，请重新设置","error-51137":"定时时间限制重复周期非法，请重新设置","error-51401":"IP地址必须与LAN口或WAN口IP地址在同一网段，请重新设置","error-51402":"绑定的IP地址已被占用，请重新设置","error-51501":"时间段描述不能为空，请重新输入","error-51502":"时间段描述长度超出允许范围，请重新输入","error-51503":"开始时间设置错误，请重新输入","error-51504":"结束时间设置错误，请重新输入","error-51505":"结束时间不能早于开始时间，请重新设置","error-51506":"重复周期不能为空，请重新设置","error-51507":"重复周期设置错误，请重新设置","error-51601":"PLC网络名不能为空，请重新设置","error-51602":"扩展器添加失败","error-51603":"扩展器断开失败","error-60101":"请求超时，请稍后重试"}};!function(a){"use strict";var b=(a("html").attr("app"),a("html").attr("lang")||"zh"),c={};a.get(b+".json").success(function(d){if("object"==typeof d)c=d;else try{c=JSON.parse(d)}catch(e){c={}}c=a.extend({},ERROR_MESSAGE[b],c),a(function(){replace(),a.mobile.activePage&&a.mobile.activePage.jqmData("title",document.title),a(document).trigger("i18n")})}),window.replace=function(b){return b=b||a(document),b.filter("[data-i18n]").add(b.find("[data-i18n]")).each(function(){var b=a(this).attr("data-i18n");this.innerHTML=c[b]||""}),b.filter("[placeholder]").add(b.find("[placeholder]")).each(function(){a(this).attr("placeholder",c[a(this).attr("placeholder")]||"")}),b},window.l=function(a){return/^error-\d*$/.test(a)?c[a]||c["error-10000"]:c[a]||""}}(jQuery),function(a){function b(a){a.preventDefault()}var c,d='<div id="loading" role="dialog"><div role="container">{{#close}}<img role="close" src="../webcore/images/close.png"/>{{/close}}<img role="icon" src="../webcore/images/loading1.png"/><p role="title"></p><p role="content">{{content}}</p></div><div role="cover"></div></div>';window.loading=function(e,f,g){var h=a("#loading"),i=a("body");h.length&&h.remove(),h=a(Mustache.render(d,{content:e,close:f})),i.append(h),document.body.addEventListener("touchmove",b,!1);var j=1,k=setInterval(function(){j=++j%13,j=j||1,h.is(":visible")?h.find('[role="icon"]').attr("src","../webcore/images/loading"+j+".png"):clearInterval(k)},100);c=g,h.find('[role="close"]').on("click",function(){g&&g(),dismissLoading()})},window.dismissLoading=function(){a("#loading").length&&a("#loading").remove()&&document.body.removeEventListener("touchmove",b,!1)};var e=!0,f=window.onpopstate;window.onpopstate=function(){return e?(e=!1,void 0):(a("#loading").length&&(dismissLoading(),c&&c(),c=!1),f&&f(),void 0)}}(jQuery),function(a){"use strict";a.mobile.defaultPageTransition="none",window.plugin_quit=function(){var a={method:"do_app",app:{plugin_quit:null}};callAjax(a,null)},window.quit=function(){plugin_quit()},a(function(){a('[data-quit-app="true"]').click(function(){plugin_quit()})}),a.fn.render=function(b,c){var d=a(Mustache.render(a("#"+b).html(),c));return this.append(replace(d)),a(document).trigger("drawarrow"),this},a.fn.replaceText=function(b){return this.each(function(){a(this).find("img").length&&(b=a(this).html().replace(/^[^<]*(.*)$/,b+"$1")),a(this).html(b)})},a.fn.fetchText=function(){return this.html().replace(/^([^<]*).*$/,"$1")}}(jQuery),function(a){"use strict";var b={},c='<div role="error-{{id}}"><img src="../webcore/images/red-sign.png"/><span role="message">{{message}}</span></div>';window.showError=function(b,d){if(d){a('[role="error-'+b+'"]').remove();var e=a(Mustache.render(c,{id:b,message:d})),f=a("#"+b).offset();a("#"+b).closest("li").after(e),e.css({top:Math.floor(f.top)+38+"px"})}},window.dismissError=function(b){var c;c=b?a('[role="error-'+b+'"]'):a('[role^="error-"]'),c.length&&c.remove()},window.bindRules=function(a){b=a},window.valid=function(){var c,d,e,f,g,h,i={},j=arguments[0];if("string"==typeof j)i[j]=b[j];else if(a.isArray(j))for(g=0,h=j.length;h>g;g++)i[j[g]]=b[j[g]];else i=b;for(c in i){if(d=a("#"+c),f=d.val(),e=b[c],!d.is(":visible"))break;var k,l,m;for(g=0,h=e.length;h>g;g++){if(k=e[g][0],l=e[g][1],m=e[g][2],!k(f,m))return showError(c,l),!1;g===h-1&&dismissError(c)}}return!0}}(jQuery);